<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sharing Fishes Demo</title>
</head>
<body>
    <h1>GitHub User Information</h1>
  <form id="usernameForm">
    <label for="username">GitHub Username:</label>
    <input type="text" id="username" name="username" required>
    <button type="button" onclick="fetchGitHubData('repos')">Fetch Repos</button>
    <button type="button" onclick="fetchGitHubData('projects')">Fetch Projects</button>
    <button type="button" onclick="fetchGitHubData('orgs')">Fetch Organizations</button>
  </form>
  <h2 id="listHeader"></h2>
    <div id="repoList"></div>
    <script>
        function jsonToHtmlList(jsonData, primaryField, fieldsToDisplay) {
          let html = '<ul>';
          for (let item of jsonData) {
            html += `<li><strong>${item[primaryField]}</strong>`;
            html += '<ul>';
            for (let key of fieldsToDisplay) {
              if (item.hasOwnProperty(key) && key !== primaryField) {
                html += `<li>${key}: ${item[key]}</li>`;
              }
            }
            html += '</ul>';
            html += '</li>';
          }
          html += '</ul>';
          return html;
        }
    
        function fetchGitHubData(type) {
      const username = document.getElementById('username').value;
      if (!username) {
        alert('Please enter a GitHub username.');
        return;
      }

      let url;
      let primaryField;
      let fieldsToDisplay;
      let listHeader;


      switch (type) {
        case 'repos':
          url = `https://api.github.com/users/${username}/repos`;
          primaryField = 'name';
          fieldsToDisplay = ['name', 'node_id'];
          listHeader = `${username}\'s Repositories`;
          break;
        case 'projects':
          url = `https://api.github.com/users/${username}/projects`;
          primaryField = 'name';
          fieldsToDisplay = ['name', 'id', 'body'];
          listHeader = `${username}\'s Projects`;
          break;
        case 'orgs':
          url = `https://api.github.com/users/${username}/orgs`;
          primaryField = 'login';
          fieldsToDisplay = ['login', 'id', 'description'];
          listHeader = `${username}\'s Organizations`;
          break;
        default:
          alert('Unknown data type.');
          return;
      }

      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
          }
          return response.json();
        })
        .then(data => {
          const htmlList = jsonToHtmlList(data, primaryField, fieldsToDisplay);
          document.getElementById('listHeader').innerText = listHeader;
          document.getElementById('repoList').innerHTML = htmlList;
        })
        .catch(error => {
          console.error('Error fetching data:', error);
          document.getElementById('repoList').innerText = 'Error fetching data. Please try again later.';
        });
    }

      </script>
</body>
</html>